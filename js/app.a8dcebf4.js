(function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function o(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"71bfcc75"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=n[e]=[t,a]}));t.push(r[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=o(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",c.name="ChunkLoadError",c.type=a,c.request=s,r[1](c)}n[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"30fa":function(e,t,r){},"4e5b":function(e,t,r){"use strict";r("a743")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),r("router-link",{attrs:{to:"/register"}},[e._v("Register")]),e._v(" | "),r("router-link",{attrs:{to:"/sign"}},[e._v("Log in")]),e._v(" | "),r("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),r("router-view")],1)},s=[],o=(r("034f"),r("2877")),i={},l=Object(o["a"])(i,n,s,!1,null,null,null),c=l.exports,u=r("1da1"),m=r("5530"),d=(r("96cf"),r("522d")),p=r("efe7");a["a"].use(d["a"]);var v="apollo-token",g=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_GRAPHQL_HTTP||"http://webprogbase-lab6-graphql.herokuapp.com/",b={httpEndpoint:g,wsEndpoint:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_GRAPHQL_WS||"wss://webprogbase-lab6-graphql.herokuapp.com/graphql",tokenName:v,persisting:!1,websocketsOnly:!1,ssr:!1};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(p["createApolloClient"])(Object(m["a"])(Object(m["a"])({},b),e)),r=t.apolloClient,a=t.wsClient;r.wsClient=a;var n=new d["a"]({defaultClient:r,defaultOptions:{$query:{}},errorHandler:function(e){console.log("%cError","background: red; color: red; padding: 2px 4px; border-radius: 3px; font-weight: bold;",e.message)}});return n}function f(e,t){return _.apply(this,arguments)}function _(){return _=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"undefined"!==typeof localStorage&&r&&localStorage.setItem(v,r),t.wsClient&&Object(p["restartWebsockets"])(t.wsClient),e.prev=2,e.next=5,t.resetStore();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),console.log("%cError on cache reset (login)","color: orange;",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),_.apply(this,arguments)}r("d3b7"),r("3ca3"),r("ddb0");var C,w,R,y,x,O,j,E,$,k,S,q,D,P,M,U,A,B=r("8c4f"),N=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},L=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("h1",[e._v(" Home page â™¥")])])}],T={name:"Home",components:{}},I=T,H=Object(o["a"])(I,N,L,!1,null,null,null),J=H.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex-div"},[r("div",{staticClass:"login"},[e.error?r("div",[r("div",{staticClass:"alert alert-danger alert-dismissible fade show",attrs:{role:"alert"}},[r("strong",[e._v("Authentification failed!")]),e._v(" "+e._s(e.error)+" "),r("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"alert","aria-label":"Close"},on:{click:e.noerr}})])]):e._e(),r("form",{on:{submit:e.sendForm}},[r("label",[r("p",{staticClass:"label-txt"},[e._v("ENTER YOUR NAME")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input",attrs:{type:"text",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._m(0)]),r("label",[r("p",{staticClass:"label-txt"},[e._v("ENTER YOUR PASSWORD")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._m(1)]),r("button",{attrs:{type:"submit",id:"myBt"}},[e._v("submit")]),r("div",{attrs:{id:"some"}},[e._v("don't have an account? "),r("router-link",{attrs:{to:"/register"}},[e._v("Register now")])],1)])])])},Q=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"line-box"},[r("div",{staticClass:"line"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"line-box"},[r("div",{staticClass:"line"})])}],G=(r("d81d"),r("8785")),V=r("5184"),W=Object(V["a"])(C||(C=Object(G["a"])(["query login($username: String!, $password: String!){\n    login(username: $username, password: $password)}"]))),Y=Object(V["a"])(w||(w=Object(G["a"])(["query register($username: String!, $password: String!){\n    register(username: $username, password: $password){\n    username}}"]))),z=Object(V["a"])(R||(R=Object(G["a"])(["query rooms {\n    rooms {id name owner {username}}\n    }"]))),K=Object(V["a"])(y||(y=Object(G["a"])(["mutation createRoom ($name: String!){\n    createRoom(name: $name) {\n        id\n        name\n        timestamp\n    }\n    }"]))),X=Object(V["a"])(x||(x=Object(G["a"])(["subscription roomCreated {\n    roomCreated {\n    id name owner {username}\n        }\n    }"]))),Z=Object(V["a"])(O||(O=Object(G["a"])(["subscription roomUpdated {\n    roomUpdated {\n    id name owner {username}\n        }\n    }"]))),ee=Object(V["a"])(j||(j=Object(G["a"])(["subscription roomDeleted {\n    roomDeleted{\n    id \n        }\n    }"]))),te=Object(V["a"])(E||(E=Object(G["a"])(["subscription currentRoomChanged {\n    currentRoomChanged {\n        id\n      currentRoom { id \n        name \n        owner{username}\n        members{id username}\n        lastMessages{id timestamp author{username} text}\n    }\n    }\n  }\n  "]))),re=Object(V["a"])($||($=Object(G["a"])(["subscription messageCreated {\n    messageCreated {\n      id\n      timestamp\n      author { id username }\n      text\n    }\n  }"]))),ae=Object(V["a"])(k||(k=Object(G["a"])(["subscription memberJoined {\n    memberJoined { id username }\n  }"]))),ne=Object(V["a"])(S||(S=Object(G["a"])(["subscription memberLeft {\n    memberLeft { id username }\n  }"]))),se=Object(V["a"])(q||(q=Object(G["a"])(["query me {\n    me {\n      id\n      username\n      currentRoom {\n        id\n        name\n        owner{username}\n        members{id username}\n        lastMessages{id timestamp author{username} text}\n      }\n    }\n  }"]))),oe=Object(V["a"])(D||(D=Object(G["a"])(["mutation join($roomId: ID!) {\n    joinRoom(roomId: $roomId) {\n      id\n      name\n    }\n  }"]))),ie=Object(V["a"])(P||(P=Object(G["a"])(["mutation leave {\n    leaveCurrentRoom {\n      id \n      name\n    }\n  }"]))),le=Object(V["a"])(M||(M=Object(G["a"])(["mutation updateRoom ($id: ID!,$name: String!){\n    updateRoom(id: $id, name: $name) {\n      id \n    }\n  }"]))),ce=Object(V["a"])(U||(U=Object(G["a"])(["mutation deleteRoom ($id: ID!){\n    deleteRoom (id: $id) {\n      id \n    }\n  }"]))),ue=Object(V["a"])(A||(A=Object(G["a"])(["mutation createMessage ($text: String!) {\n    createMessage(text: $text) {\n      id\n      timestamp\n      author { username }\n      text\n    }\n  }"]))),me={name:"SignIn",data:function(){return{login:null,user:null,error:null,username:null,password:null,er_mes:"",skipQuery:!0}},methods:{sendForm:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),a=null,r.prev=2,r.next=5,t.$apollo.query({query:W,variables:{username:t.username,password:t.password}});case 5:return a=r.sent,console.log(a.data.login),localStorage.setItem("username",t.username),r.next=10,f(t.$apollo.provider.defaultClient,a.data.login);case 10:t.$router.push("/chats"),r.next=19;break;case 13:r.prev=13,r.t0=r["catch"](2),n=r.t0.graphQLErrors,s=r.t0.networkError,n&&n.map((function(e){var r=e.message;return t.error=r})),s&&(t.error=s);case 19:case"end":return r.stop()}}),r,null,[[2,13]])})))()},noerr:function(){this.error=""}}},de=me,pe=(r("64a5"),Object(o["a"])(de,F,Q,!1,null,"c39b4360",null)),ve=pe.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.error?r("div",[r("div",{staticClass:"alert alert-danger alert-dismissible fade show",attrs:{role:"alert"}},[r("strong",[e._v("Authentification failed!")]),e._v(" "+e._s(e.error)+" "),r("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"alert","aria-label":"Close"},on:{click:e.noerr}})])]):e._e(),r("form",{on:{submit:e.sendForm}},[r("label",[r("p",{staticClass:"label-txt"},[e._v("ENTER YOUR NAME")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input",attrs:{type:"text",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._m(0)]),r("label",[r("p",{staticClass:"label-txt"},[e._v("ENTER YOUR PASSWORD")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._m(1)]),r("button",{attrs:{type:"submit",id:"myBt"}},[e._v("submit")]),r("div",{attrs:{id:"some"}},[e._v("Already have an account? "),r("router-link",{attrs:{to:"/sign"}},[e._v("Log in now")])],1)])])},be=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"line-box"},[r("div",{staticClass:"line"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"line-box"},[r("div",{staticClass:"line"})])}],he={name:"register",data:function(){return{id:null,errors:null,username:null,password:null,error:null,er_mes:""}},methods:{sendForm:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),a=null,n=null,r.prev=3,r.next=6,t.$apollo.query({query:Y,variables:{username:t.username,password:t.password}});case 6:return a=r.sent,console.log(a.data),r.next=10,t.$apollo.query({query:W,variables:{username:t.username,password:t.password}});case 10:return n=r.sent,console.log(n.data.login),localStorage.setItem("username",t.username),r.next=15,f(t.$apollo.provider.defaultClient,n.data.login);case 15:t.$router.push("/chats"),r.next=24;break;case 18:r.prev=18,r.t0=r["catch"](3),s=r.t0.graphQLErrors,o=r.t0.networkError,s&&s.map((function(e){var r=e.message;return t.error=r})),o&&(t.error=o);case 24:case"end":return r.stop()}}),r,null,[[3,18]])})))()},noerr:function(){this.error=""}}},fe=he,_e=(r("4e5b"),Object(o["a"])(fe,ge,be,!1,null,"90c4a2c4",null)),Ce=_e.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"chat"},[r("div",{staticClass:"block-left "},[r("div",{staticClass:"container scrollStatus",attrs:{id:"container"}},[r("div",{staticClass:"inbox_people"},[r("div",{staticClass:"headind_srch"},[r("div",{staticClass:"recent_heading"},[r("h4",[e._v("USER: "+e._s(e.username)+" "),r("br"),e._v(" --CHATS--")])]),r("div",{staticClass:"srch_bar"},[r("form",{on:{submit:e.sendForm}},[r("div",{staticClass:"stylish-input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.room_name,expression:"room_name"}],staticClass:"search-bar",attrs:{type:"text",placeholder:"Create new",required:""},domProps:{value:e.room_name},on:{input:function(t){t.target.composing||(e.room_name=t.target.value)}}}),e._m(0)])])])]),r("div",{staticClass:"inbox_chat"},e._l(e.rooms,(function(t){return r("div",{key:t.id},[t.owner.username==e.username?r("div",{staticClass:"chat_list active_chat",attrs:{"aria-current":"true"}},[r("div",{staticClass:"chat_people"},[e._m(1,!0),r("div",{staticClass:"chat_ib"},[r("span",{attrs:{id:"text"}},[e._v(e._s(t.name))]),r("input",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit",value:"connect",id:"myBt"},on:{click:function(r){return e.enterRoom(t)}}})])])]):r("div",{staticClass:"chat_list"},[r("div",{staticClass:"chat_people"},[e._m(2,!0),r("div",{staticClass:"chat_ib"},[r("span",{attrs:{id:"text"}},[e._v(" "+e._s(t.name))]),r("input",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit",value:"connect",id:"myBt"},on:{click:function(r){return e.enterRoom(t)}}})])])])])})),0)])])]),e.$apollo.loading?e._e():r("div",[e.deleted?r("div",[r("img",{attrs:{src:"https://res.cloudinary.com/optiolna/image/upload/v1624310131/icons8-%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C-128_ohhldn.png",alt:"sunil"}})]):e.me.currentRoom?r("div",{staticClass:"block-right"},[r("div",{staticClass:"block-left"},[r("div",{staticClass:"headind_srch"},[r("div",{staticClass:"recent_heading"},[r("h4",[e._v(e._s(e.me.currentRoom.name))])]),e.username==e.me.currentRoom.owner.username?r("div",{staticClass:"srch_bar"},[r("div",{staticClass:"stylish-input-group"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateRoom(e.me.currentRoom)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.update,expression:"update"}],staticClass:"search-bar",attrs:{type:"text",placeholder:"new name",required:""},domProps:{value:e.update},on:{input:function(t){t.target.composing||(e.update=t.target.value)}}}),e._m(3)])])]):e._e()]),r("div",{staticClass:"mesgs"},[r("div",{staticClass:"msg_history"},e._l(e.me.currentRoom.lastMessages,(function(t){return r("div",{key:t.id},[t.author.username!=e.username?r("div",{staticClass:"incoming_msg"},[e._m(4,!0),r("div",{staticClass:"received_msg"},[r("div",{staticClass:"received_withd_msg"},[r("p",[e._v(e._s(t.text))]),r("span",{staticClass:"time_date"},[e._v(" "+e._s(t.timestamp)+" | ["+e._s(t.author.username)+"]")])])])]):r("div",{staticClass:"outgoing_msg "},[r("div",{staticClass:"sent_msg"},[r("p",[e._v(e._s(t.text))]),r("span",{staticClass:"time_date"},[e._v(" "+e._s(t.timestamp)+" | [you]")])])])])})),0),r("form",{on:{submit:function(t){return t.preventDefault(),e.createMessage(t)}}},[r("div",{staticClass:"type_msg"},[r("div",{staticClass:"input_msg_write"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"write_msg",attrs:{type:"text",placeholder:"Type a message",required:""},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._m(5)])])])])]),r("div",{staticClass:"block-right"},[r("div",{staticClass:"container scrollStatus",attrs:{id:"container"}},[r("div",{staticClass:"headind_srch"},[r("div",{staticClass:"recent_heading"},[r("div",{staticClass:"srch_bar"},[r("div",{staticClass:"stylish-input-group"},[r("span",{staticClass:"input-group-addon"},[e.username==e.me.currentRoom.owner.username?r("button",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"create"},on:{click:function(t){return e.deleteRoom(e.me.currentRoom)}}},[e._v("delete")]):e._e()])])])]),r("div",{staticClass:"srch_bar"},[r("div",{staticClass:"stylish-input-group"},[r("span",{staticClass:"input-group-addon"},[r("button",{attrs:{type:"submit",value:"create"},on:{click:e.leaveRoom}},[e._v("leave")])])])])]),r("div",{staticClass:"inbox_people"},[r("div",{staticClass:"inbox_chat"},[r("ul",{staticClass:"list-group"},e._l(this.me.currentRoom.members,(function(t){return r("div",{key:t.id},[t.username==e.username?r("div",{staticClass:"chat_list active_chat",attrs:{"aria-current":"true"}},[r("div",{staticClass:"chat_people"},[r("div",{staticClass:"chat_ib"},[r("span",{attrs:{id:"text"}},[e._v(e._s(t.username))])])])]):r("div",{staticClass:"chat_list"},[r("div",{staticClass:"chat_people"},[r("div",{staticClass:"chat_ib"},[r("span",{attrs:{id:"text"}},[e._v(e._s(t.username))])])])])])})),0)])])])])]):e._e()])])},Re=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"input-group-addon"},[r("button",{attrs:{type:"submit",value:"create"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"chat_img"},[r("img",{attrs:{src:"https://res.cloudinary.com/optiolna/image/upload/v1624464570/more_cwk59q.png",alt:"sunil"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"chat_img"},[r("img",{attrs:{src:"https://res.cloudinary.com/optiolna/image/upload/v1624464457/ellipsis_qdcvs0.png",alt:"sunil"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"input-group-addon"},[r("button",{attrs:{type:"submit",value:"create"}},[e._v("Update")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"incoming_msg_img"},[r("img",{attrs:{src:"https://res.cloudinary.com/optiolna/image/upload/v1624464752/user_wesh7r.png",alt:"sunil"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"msg_send_btn",attrs:{type:"submit"}},[r("i",{staticClass:"fa fa-paper-plane-o",attrs:{"aria-hidden":"true"}})])}],ye=(r("a434"),{name:"Home",data:function(){return{rooms:[],room_name:null,username:localStorage.getItem("username"),message:null,me:null,update:null,deleted:!1,id:1}},apollo:{rooms:{query:z},me:{query:se},$subscribe:{roomCreated:{query:X,result:function(e){var t=e.data,r=t.roomCreated;console.log("SUB CREATE ROOM",r),this.rooms.push(r)}},roomDeleted:{query:ee,result:function(e){for(var t=e.data,r=0;r<this.rooms.length;r++)this.rooms[r].id==t.roomDeleted.id&&this.rooms.splice(r,1);this.me.currentRoom.id==t.roomDeleted.id&&(this.deleted=!0,this.me.currentRoom=null),console.log("SUB ROOM DELETE",t.roomDeleted)}},roomUpdated:{query:Z,result:function(e){for(var t=e.data,r=0;r<this.rooms.length;r++)this.rooms[r].id==t.roomUpdated.id&&(console.log(this.rooms[r]),this.$set(this.rooms,r,t.roomUpdated),console.log(this.rooms[r]));console.log("SUB ROOM UPDATE",t.roomUpdated)}},currentRoomChanged:{query:te,result:function(e){var t=e.data;t.currentRoomChanged.currentRoom?this.$set(this.me.currentRoom,"currentRoom",t.currentRoomChanged.currentRoom):this.me.currentRoom=null,console.log("SUB ROOM CHANGE",t.currentRoomChanged.currentRoom)}},memberJoin:{query:ae,result:function(e){var t=e.data;this.me.currentRoom.members.push(t.memberJoined);var r={id:this.id,author:{username:"system"},text:t.memberJoined.username+" entered"};this.id++,this.me.currentRoom.lastMessages.push(r),console.log("SUB MEMBER JOIN",t.memberJoined)}},memberLeft:{query:ne,result:function(e){for(var t=e.data,r=0;r<this.me.currentRoom.members.length;r++)this.me.currentRoom.members[r].id==t.memberLeft.id&&this.me.currentRoom.members.splice(r,1);var a={id:this.id,author:{username:"system"},text:t.memberLeft.username+" leaved"};this.me.currentRoom.lastMessages.push(a),this.id++,console.log("SUB MEMBER LEFT",t.memberLeft)}},messageSubCreate:{query:re,result:function(e){var t=e.data;this.me.currentRoom.lastMessages.push(t.messageCreated),console.log("SUB MESSAGE CREATE",t.messageCreated)}}}},methods:{sendForm:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,console.log("create post"),r.next=5,t.$apollo.mutate({mutation:K,variables:{name:t.room_name}});case 5:a=r.sent,console.log(a),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},enterRoom:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.deleted=!1,console.log("Hello"),console.log(e),t.me.currentRoom){r.next=12;break}return console.log("enter room"),r.next=8,t.$apollo.mutate({mutation:oe,variables:{roomId:e.id}});case 8:a=r.sent,console.log(a),r.next=22;break;case 12:return console.log("leave room"),r.next=15,t.$apollo.mutate({mutation:ie});case 15:return n=r.sent,console.log(n),console.log("enter room"),r.next=20,t.$apollo.mutate({mutation:oe,variables:{roomId:e.id}});case 20:s=r.sent,console.log(s);case 22:r.next=27;break;case 24:r.prev=24,r.t0=r["catch"](0),console.log(r.t0);case 27:case"end":return r.stop()}}),r,null,[[0,24]])})))()},leaveRoom:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("leave room"),t.next=4,e.$apollo.mutate({mutation:ie});case 4:r=t.sent,console.log(r),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updateRoom:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log(e),console.log("update room"),r.next=5,t.$apollo.mutate({mutation:le,variables:{id:e.id,name:t.update}});case 5:a=r.sent,console.log(a),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:t.update=null;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},deleteRoom:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log(e),console.log("delete room"),r.next=5,t.$apollo.mutate({mutation:ce,variables:{id:e.id}});case 5:for(a=r.sent,console.log(a),n=0;n<t.me.currentRoom.members.length;n++)t.me.currentRoom.members.currentRoom=null;r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},createMessage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("create message"),t.next=4,e.$apollo.mutate({mutation:ue,variables:{text:e.message}});case 4:r=t.sent,console.log(r),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:e.message=null;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),xe=ye,Oe=(r("9cf4"),Object(o["a"])(xe,we,Re,!1,null,"f330dc00",null)),je=Oe.exports;a["a"].use(B["a"]);var Ee=function(e,t,r){localStorage.getItem("username")?r():ke.push("/sign")},$e=[{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}},{path:"/sign",name:"Sign",component:ve},{path:"/",name:"Home",component:J},{path:"/register",name:"Register",component:Ce},{path:"/chats",name:"Chats",component:je,beforeEnter:Ee}],ke=new B["a"]({mode:"history",base:"/",routes:$e}),Se=ke;a["a"].config.productionTip=!1,new a["a"]({apolloProvider:h(),router:Se,render:function(e){return e(c)}}).$mount("#app")},"64a5":function(e,t,r){"use strict";r("7136")},7136:function(e,t,r){},"85ec":function(e,t,r){},"9cf4":function(e,t,r){"use strict";r("30fa")},a743:function(e,t,r){}});
//# sourceMappingURL=app.a8dcebf4.js.map